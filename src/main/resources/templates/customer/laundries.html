<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>μ½”μΈμ›μ‹ - μ£Όλ³€ μ„Ένƒμ†</title>
  <link th:href="@{/css/style.css}" rel="stylesheet">
  <link th:href="@{/css/address-search.css}" rel="stylesheet">
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<div class="container">
  <div class="page-header">
    <h1>π” μ£Όλ³€ μ„Ένƒμ†</h1>
    <p>λ‚΄ μ£Όλ³€ μ„Ένƒμ†λ¥Ό μ°Ύμ•„ μ΄μ©ν•΄λ³΄μ„Έμ”</p>
  </div>

  <!-- μ„μΉ μ„¤μ • λ° κ²€μƒ‰ -->
  <div class="location-section">
    <!-- μ£Όμ† κ²€μƒ‰ μ»΄ν¬λ„νΈ -->
    <div class="address-search-container">
      <div class="search-input-group">
        <input type="text" id="addressSearch" placeholder="μ£Όμ†λ¥Ό μ…λ ¥ν•μ„Έμ” (μ‹¤μ‹κ°„ κ²€μƒ‰)" class="form-control">
        <span class="search-feedback" id="searchFeedback"></span>
        <button id="searchAddressBtn" class="search-btn">π” μ£Όμ† κ²€μƒ‰</button>
        <button id="getCurrentLocationBtn" class="btn btn-outline">π“ ν„μ¬ μ„μΉ</button>
      </div>

      <!-- λ‚λ¨Έμ§€λ” λ™μΌ -->
      <!-- μ£Όμ† κ²€μƒ‰ κ²°κ³Ό -->
      <div id="addressResults" class="address-results" style="display: none;">
        <div class="results-header">
          <span>π“ μ£Όμ† κ²€μƒ‰ κ²°κ³Ό</span>
          <button type="button" class="clear-results-btn" onclick="hideAddressResults()">β•</button>
        </div>
        <ul id="addressList" class="address-list">
          <!-- JavaScriptλ΅ λ™μ  λ΅λ”© -->
        </ul>
      </div>

      <!-- μ„ νƒλ μ£Όμ† ν‘μ‹ -->
      <div id="selectedAddress" class="selected-address" style="display: none;">
        <div class="selected-header">
          <span>β… μ„ νƒλ μ£Όμ†</span>
          <button type="button" id="clearSelected" class="clear-results-btn" onclick="clearSelectedAddress()">β•</button>
        </div>
        <div class="selected-content">
          <div class="address-name" id="selectedAddressName"></div>
          <div class="address-coords" id="selectedAddressCoords"></div>
        </div>
      </div>
    </div>

    <div class="distance-selector">
      <label>κ²€μƒ‰ κ±°λ¦¬:</label>
      <select id="distanceSelect" class="form-control">
        <option value="0.5">500m</option>
        <option value="1.0">1km</option>
        <option value="2.0">2km</option>
        <option value="5.0">5km</option>
      </select>
      <button id="searchLaundriesBtn" class="btn btn-primary">π” μ„Ένƒμ† κ²€μƒ‰</button>
    </div>
  </div>

  <!-- μ„Ένƒμ† λ©λ΅ -->
  <div class="laundries-section">
    <div class="section-header">
      <h2 id="laundriesTitle">π μ£Όλ³€ μ„Ένƒμ†</h2>
    </div>

    <div id="laundriesList" class="laundries-list">
      <div class="empty-state">
        <div class="empty-icon">π”</div>
        <h3>μ„μΉλ¥Ό μ„¤μ •ν•΄μ£Όμ„Έμ”</h3>
        <p>μ£Όμ†λ¥Ό κ²€μƒ‰ν•κ±°λ‚ ν„μ¬ μ„μΉλ¥Ό μ‚¬μ©ν•μ—¬ μ£Όλ³€ μ„Ένƒμ†λ¥Ό μ°Ύμ•„λ³΄μ„Έμ”</p>
      </div>
    </div>
  </div>

  <!-- λ΅λ”© μ¤ν”Όλ„ -->
  <div id="loading" class="loading-spinner" style="display: none;">
    <div class="spinner"></div>
    <p>μ„Ένƒμ†λ¥Ό κ²€μƒ‰ν•λ” μ¤‘...</p>
  </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<!-- μμ„ μ¤‘μ”: μ ν‹Έλ¦¬ν‹° λ¨Όμ €, λ©”μΈ μ¤ν¬λ¦½νΈ λ‚μ¤‘μ— -->
<script th:src="@{/js/address-search-utils.js}"></script>
<script th:src="@{/js/customer-laundries.js}"></script>
</body>
</html>
