<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>μ½”μΈμ›μ‹ - κΈ°κ³„ ν„ν™©</title>
  <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<div class="container">
  <div class="page-header">
    <h1>π”§ κΈ°κ³„ ν„ν™©</h1>
    <p id="laundryInfo">μ„Ένƒμ† κΈ°κ³„ ν„ν™©μ„ ν™•μΈν•κ³  μμ•½ν•μ„Έμ”</p>
  </div>

  <!-- κΈ°κ³„ ν„ν™© μ”μ•½ -->
  <div class="machine-summary">
    <div class="summary-card washing">
      <div class="summary-icon">π€</div>
      <div class="summary-info">
        <h3 id="washingCount">0</h3>
        <p>μ„ΈνƒκΈ°</p>
      </div>
    </div>

    <div class="summary-card drying">
      <div class="summary-icon">π”¥</div>
      <div class="summary-info">
        <h3 id="dryingCount">0</h3>
        <p>κ±΄μ΅°κΈ°</p>
      </div>
    </div>

    <div class="summary-card available">
      <div class="summary-icon">β…</div>
      <div class="summary-info">
        <h3 id="availableCount">0</h3>
        <p>μ‚¬μ© κ°€λ¥</p>
      </div>
    </div>

    <div class="summary-card in-use">
      <div class="summary-icon">π”„</div>
      <div class="summary-info">
        <h3 id="inUseCount">0</h3>
        <p>μ‚¬μ© μ¤‘</p>
      </div>
    </div>
  </div>

  <!-- κΈ°κ³„ λ©λ΅ -->
  <div class="machines-section">
    <div class="section-header">
      <h2>π”§ κΈ°κ³„ λ©λ΅</h2>
      <button id="refreshBtn" class="btn btn-outline">
        π”„ μƒλ΅κ³ μΉ¨
      </button>
    </div>

    <div class="machines-grid" id="machinesGrid">
      <!-- JavaScriptλ΅ λ™μ  λ΅λ”© -->
    </div>
  </div>

  <!-- λ΅λ”© μ¤ν”Όλ„ -->
  <div id="loading" class="loading-spinner" style="display: none;">
    <div class="spinner"></div>
    <p>κΈ°κ³„ μ •λ³΄λ¥Ό λ¶λ¬μ¤λ” μ¤‘...</p>
  </div>
</div>

<!-- κΈ°κ³„ μ‚¬μ© λ¨λ‹¬ -->
<div id="useMachineModal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="useMachineTitle">π€ μ„ΈνƒκΈ° μ‚¬μ©</h3>
      <span class="close" id="closeUseMachineModal">&times;</span>
    </div>
    <div class="modal-body">
      <div id="machineInfo" class="machine-info">
        <!-- κΈ°κ³„ μ •λ³΄ ν‘μ‹ -->
      </div>

      <form id="useMachineForm">
        <input type="hidden" id="useMachineId" name="machineId">
        <input type="hidden" id="machineType" name="machineType">

        <div class="form-group">
          <label for="course">π― μ½”μ¤ μ„ νƒ</label>
          <div id="courseOptions" class="course-options">
            <!-- JavaScriptλ΅ λ™μ  μƒμ„± -->
          </div>
        </div>

        <div class="cost-summary">
          <div class="cost-item">
            <span>μ„ νƒν• μ½”μ¤:</span>
            <span id="selectedCourse">-</span>
          </div>
          <div class="cost-item">
            <span>ν•„μ” ν¬μΈνΈ:</span>
            <span id="requiredPoints">0</span>μ›
          </div>
          <div class="cost-item">
            <span>λ³΄μ  ν¬μΈνΈ:</span>
            <span id="userPoints">0</span>μ›
          </div>
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn btn-primary btn-full">
            β¨ μ‚¬μ© μ‹μ‘
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- μμ•½ λ¨λ‹¬ -->
<div id="reserveMachineModal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3>π“… κΈ°κ³„ μμ•½</h3>
      <span class="close" id="closeReserveMachineModal">&times;</span>
    </div>
    <div class="modal-body">
      <div id="reserveMachineInfo" class="machine-info">
        <!-- κΈ°κ³„ μ •λ³΄ ν‘μ‹ -->
      </div>

      <div class="reservation-notice">
        <div class="notice-icon">β οΈ</div>
        <div class="notice-content">
          <h4>μμ•½ μ•λ‚΄</h4>
          <ul>
            <li>μμ•½ ν›„ 15λ¶„ λ‚΄μ— μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤</li>
            <li>15λ¶„ λ‚΄ λ―Έμ‚¬μ© μ‹ μλ™ μ·¨μ†λ©λ‹λ‹¤</li>
            <li>μμ•½ μ·¨μ† μ‹ ν¬μΈνΈμ 50%λ§ ν™λ¶λ©λ‹λ‹¤</li>
          </ul>
        </div>
      </div>

      <form id="reserveMachineForm">
        <input type="hidden" id="reserveMachineId" name="machineId">

        <div class="cost-summary">
          <div class="cost-item">
            <span>μμ•½ ν¬μΈνΈ:</span>
            <span id="reservationPoints">100</span>μ›
          </div>
          <div class="cost-item">
            <span>λ³΄μ  ν¬μΈνΈ:</span>
            <span id="userPointsReserve">0</span>μ›
          </div>
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn btn-primary btn-full">
            π“… μμ•½ν•κΈ°
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<script th:src="@{/js/customer-machines.js}"></script>
</body>
</html>