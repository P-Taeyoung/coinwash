spring:
  application:
    name: coinwash

  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/coinwash?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul}
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${SPRING_DATASOURCE_USERNAME:user}
    password: ${MYSQL_PASSWORD:coinwashmysql1015}
    hikari:
      # ğŸ¯ ë™ì‹œ 3000ëª… ê¸°ì¤€ ìµœì í™”
      maximum-pool-size: 300      # 100 â†’ 300 (3000ëª… * 0.1 = 300)
      minimum-idle: 100           # 50 â†’ 100 (ê¸°ë³¸ ìœ ì§€)
      connection-timeout: 20000   # 10ì´ˆ â†’ 20ì´ˆ (ì•ˆì •ì„±)
      idle-timeout: 300000        # 3ë¶„ â†’ 5ë¶„ (ì•ˆì •ì„±)
      max-lifetime: 1800000       # 15ë¶„ â†’ 30ë¶„ (ì•ˆì •ì„±)
      leak-detection-threshold: 60000  # 30ì´ˆ â†’ 60ì´ˆ (false positive ë°©ì§€)

      # ğŸš€ ì„±ëŠ¥ ìµœì í™” ì¶”ê°€
      validation-timeout: 3000    # ê²€ì¦ íƒ€ì„ì•„ì›ƒ
      initialization-fail-timeout: 1  # ë¹ ë¥¸ ì‹¤íŒ¨
      isolate-internal-queries: false # ë‚´ë¶€ ì¿¼ë¦¬ ê²©ë¦¬ í•´ì œ (ì„±ëŠ¥ í–¥ìƒ)

  jpa:
    show-sql: false
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        # ğŸš€ JPA ì„±ëŠ¥ ìµœì í™”
        jdbc.batch_size: 50           # ë°°ì¹˜ ì²˜ë¦¬
        order_inserts: true           # ì‚½ì… ìˆœì„œ ìµœì í™”
        order_updates: true           # ì—…ë°ì´íŠ¸ ìˆœì„œ ìµœì í™”
        jdbc.batch_versioned_data: true

  jwt:
    secret: vmfhaltmskdlstkfkdgodyroqkfwkdbalroqkfwkdbalaaaaaaaaaaaaaaaabbbbb

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:coinwashredis1015}
      timeout: 2000ms             # 1ì´ˆ â†’ 2ì´ˆ (ì•ˆì •ì„±)
      connect-timeout: 3000ms     # 2ì´ˆ â†’ 3ì´ˆ (ì•ˆì •ì„±)
      lettuce:
        shutdown-timeout: 2000ms  # 1ì´ˆ â†’ 2ì´ˆ
        pool:
          # ğŸ¯ Redis ì»¤ë„¥ì…˜ í’€ ìµœì í™” (ê³¼ë„í•œ ì„¤ì • ì¡°ì •)
          max-active: 500         # 2000 â†’ 500 (ì¶©ë¶„í•¨)
          max-idle: 100           # 500 â†’ 100 (ë©”ëª¨ë¦¬ ì ˆì•½)
          min-idle: 20            # 100 â†’ 20 (ë©”ëª¨ë¦¬ ì ˆì•½)
          max-wait: 3000ms        # 5ì´ˆ â†’ 3ì´ˆ (ì ì ˆí•œ ëŒ€ê¸°)

          # ğŸ”§ ì»¤ë„¥ì…˜ ê´€ë¦¬ ìµœì í™”
          test-on-borrow: false
          test-on-return: false
          test-while-idle: true
          time-between-eviction-runs: 30000ms  # 10ì´ˆ â†’ 30ì´ˆ (CPU ì ˆì•½)
          min-evictable-idle-time: 60000ms     # 30ì´ˆ â†’ 60ì´ˆ (ì•ˆì •ì„±)

kakao:
  api:
    key: ${KAKAO_API_KEY:70a4efa03827692eeda13eea1c434f88}

server:
  # ğŸš€ Tomcat ìµœì í™” (ê°€ì¥ ì¤‘ìš”!)
  tomcat:
    threads:
      max: 500                    # 200 â†’ 500 (ë™ì‹œ 3000ëª… ì²˜ë¦¬)
      min-spare: 50               # 10 â†’ 50 (ê¸°ë³¸ ìŠ¤ë ˆë“œ í™•ë³´)
    max-connections: 10000        # 8192 â†’ 10000 (ì—¬ìœ  í™•ë³´)
    connection-timeout: 30000     # 20ì´ˆ â†’ 30ì´ˆ (ì•ˆì •ì„±)
    accept-count: 200             # ëŒ€ê¸° í í¬ê¸° (ì¶”ê°€)
    max-http-form-post-size: 2MB  # POST í¬ê¸° ì œí•œ (ì¶”ê°€)

    # ğŸ”§ ì¶”ê°€ ìµœì í™”
    processor-cache: 200          # í”„ë¡œì„¸ì„œ ìºì‹œ
    max-keep-alive-requests: 100  # Keep-Alive ìš”ì²­ ìˆ˜

# ğŸš€ JVM ìµœì í™” (ì¶”ê°€ ê¶Œì¥ì‚¬í•­)
logging:
  level:
    com.zaxxer.hikari: INFO       # HikariCP ë¡œê·¸ ë ˆë²¨
    org.springframework.web: INFO # ì›¹ ë¡œê·¸ ë ˆë²¨